// i18n module - Translation system
(function() {
    const en = {
        title: 'Brickfolio',
        startingCash: 'Starting Cash',
        dealStructure: 'Deal Structure',
        buyerType: 'Buyer Type',
        firstHome: 'First Home (75% LTV)',
        replacement: 'Replacement (70% LTV)',
        investor: 'Investment (50% LTV)',
        downPayment: 'Down Payment',
        duration: 'Duration',
        horizon: 'Horizon',
        mortgageMix: 'Mortgage Mix (Tamheel)',
        prime: 'Prime',
        kalatz: 'Kalatz',
        malatz: 'Malatz',
        katz: 'Katz (CPI)',
        matz: 'Matz (CPI)',
        prepayments: 'Prepayments',
        addPrepay: '+ Add Prepayment',
        assumptions: 'Market Variables',
        spReturn: 'S&P 500 Return',
        appreciation: 'Home Appreciation',
        inflation: 'Inflation (CPI)',
        interest: 'Interest (Base)',
        rentYield: 'Rental Yield',
        scenario: 'Scenario',
        base: 'ğŸ˜ Base',
        optimistic: 'ğŸš€ Bull',
        pessimistic: 'ğŸ» Bear',
        costs: 'Hidden Costs & Friction',
        buyCost: 'Buying Friction',
        sellCost: 'Selling Friction',
        maintenance: 'Maint. & Vacancy',
        spFee: 'S&P Expense Ratio',
        fxSpread: 'FX Spread',
        discount: 'Purchase Discount',
        results: 'Results',
        realEstate: 'Real Estate',
        sp500: 'S&P 500',
        finalEquity: 'Final Equity',
        cagr: 'CAGR',
        totalInterest: 'Interest Paid',
        wealthGrowth: 'Wealth Growth',
        cashFlow: 'Cash Flow',
        rent: 'Rent',
        interestPmt: 'Interest',
        principal: 'Principal',
        netCashflow: 'Net Cashflow',
        year: 'Year',
        years: 'years',
        asset: 'Asset',
        mortgage: 'Mortgage',
        leverage: 'Leverage',
        creditScore: 'Credit Score',
        value: 'â‚ª Value',
        roi: '% ROI',
        repayMethod: 'Repayment Method',
        spitzer: 'Spitzer',
        equalPrincipal: 'Equal Principal',
        mortgageTerm: 'Mortgage Term',
        simTimeframe: 'Simulation Timeframe',
        advancedConfig: 'Advanced Configuration',
        taxBasis: 'Taxation Basis',
        realTerms: 'Real Terms',
        nominalTerms: 'Nominal Terms',
        fxMode: 'FX Mode',
        hedged: 'Hedged (ILS)',
        exposed: 'Exposed (USD)',
        rentSurplus: 'Rent Surplus',
        reinvest: 'Reinvest',
        pocket: 'Pocket',
        match: 'Match',
        reAnnualRoi: 'RE Annual ROI',
        spAnnualRoi: 'S&P Annual ROI',
        roiDiff: 'Outperformance',
        reNet: 'Real Estate Net',
        spNet: 'S&P 500 Net',
        rentIncome: 'Rent Income',
        masShevachPaid: 'Mas Shevach',
        capGainsPaid: 'Capital Gains Tax',
        mixAllocation: 'Mix Allocation',
        editRates: 'Edit Rates',
        earlyRepayments: 'Early Repayments',
        addPrepayment: '+ Add Prepayment',
        advanced: 'Advanced',
        advancedTermHint: 'Use Advanced to set different terms per track. Click again to revert to single term.',
        riskTier: 'Risk Tier',
        auto: 'Auto',
        custom: 'Custom',
        hist: 'Hist',
        fixed: 'Fixed',
        quickScenarios: 'QUICK SCENARIOS',
        sweetSpotOptimize: 'Sweet Spot:',
        optRoi: 'ROI',
        optOutperform: 'Outperform',
        rentTax: 'Rent Tax (10% > 5.6k)',
        annualMgmtFee: 'Annual Mgmt Fee',
        depositFee: 'Deposit Fee',
        surplusDescInvest: 'Buy S&P (reinvests rent surplus into S&P 500)',
        surplusDescConsume: 'Pocket (keep rent surplus as cash)',
        surplusDescMatch: 'Sells S&P 500 to match rent surplus cashflow',
        affectsPrime: '*Affects Prime Rate (BoI + 1.5%)',
        discountHint: 'Below market price (negative = overpay)',
        buyCostHint: 'Entry costs (legal/registration; no purchase tax/broker)',
        maintHint: '% of Gross Rent lost annually',
        sellCostHint: 'Agent & Lawyer at Exit',
        realVsInflation: 'Real (vs Inflation)',
        nominalVsUsd: 'Nominal (vs USD)',
        applyTaxSP: 'Capital Gains Tax (25%)',
        yearsToPosCF: 'Years to +CF',
        moneyInvested: 'Money Invested',
        mixWarning: 'Mix must total 100% of mortgage to view charts',
        wealthChart: 'Net Wealth Accumulation',
        flowChart: 'Monthly Cashflow (Revenue vs Cost)',
        free: 'Free',
        locked: 'Locked',
        tamheelDefault: 'âš–ï¸ Balanced',
        tamheelArbitrage: 'ğŸ“‰ Rate-Cuts',
        tamheelShield: 'ğŸ›¡ï¸ Stability',
        tamheelInvestor: 'ğŸ“Š CPI Mix',
        cpiSuffix: '+ CPI',
        yrSuffix: 'Yr',
        ySuffix: 'Y',
        chartRealEstate: 'Real Estate',
        chartSP500: 'S&P 500',
        chartREAfterTax: 'RE After Tax',
        chartSPAfterTax: 'S&P After Tax',
        chartRETax: 'RE Tax',
        chartSPTax: 'S&P Tax',
        afterTax: 'After Tax',
        taxPaid: 'Tax',
        taxDeduction: 'Tax',
        chartReinvested: 'Reinvested Surplus',
        chartNetCashflow: 'Net Cashflow',
        chartRentMinusInt: 'Rent minus Interest',
        chartRevenue: 'Revenue (Rent)',
        chartInterest: 'Interest (Cost)',
        chartPrincipal: 'Principal (Equity)',
        chartYAxisROI: 'Cumulative ROI (%)',
        chartYAxisWealth: 'Net Wealth (â‚ª)',
        chartYAxisMonthly: 'Monthly â‚ª',
        chartTotalMortgage: 'Total Mortgage',
        tooltipRentMinusInt: 'Rent - Interest',
        tooltipInterest: 'Interest',
        tooltipPrincipal: 'Principal',
        tooltipRent: 'Rent',
        tooltipNet: 'Net',
        purchaseTax: 'Purchase Tax',
        includePurchaseTax: 'Apply Mas Rechisha',
        applyMasShevach: 'Apply Mas Shevach (CPI-adjusted)'
    };

    const he = {
        title: '×‘×¨×™×§×¤×•×œ×™×•',
        startingCash: '×”×•×Ÿ ×¢×¦××™',
        dealStructure: '××‘× ×” ×”×¢×¡×§×”',
        buyerType: '×¡×•×’ ×¨×•×›×©',
        firstHome: '×“×™×¨×” ×¨××©×•× ×” (75% ××™××•×Ÿ)',
        replacement: '×“×™×¨×” ×—×œ×•×¤×™×ª (70% ××™××•×Ÿ)',
        investor: '××©×§×™×¢ (50% ××™××•×Ÿ)',
        downPayment: '××§×“××”',
        duration: '×ª×§×•×¤×”',
        horizon: '××•×¤×§',
        mortgageMix: '×ª××”×™×œ ××©×›× ×ª×',
        prime: '×¤×¨×™×™×',
        kalatz: '×§×œ"×¦',
        malatz: '××œ"×¦',
        katz: '×§"×¦ (×¦××•×“)',
        matz: '×"×¦ (×¦××•×“)',
        prepayments: '×¤×™×¨×¢×•× ×•×ª ××•×§×“××™×',
        addPrepay: '+ ×”×•×¡×£ ×¤×™×¨×¢×•×Ÿ',
        assumptions: '××©×ª× ×™ ×©×•×§',
        spReturn: '×ª×©×•××ª S&P 500',
        appreciation: '×¢×œ×™×™×ª ×¢×¨×š × ×›×¡',
        inflation: '××™× ×¤×œ×¦×™×” (××“×“)',
        interest: '×¨×™×‘×™×ª (×‘×¡×™×¡)',
        rentYield: '×ª×©×•××ª ×©×›×™×¨×•×ª',
        scenario: '×ª×¨×—×™×©',
        base: 'ğŸ˜ ×‘×¡×™×¡',
        optimistic: 'ğŸš€ ×©×•×¨×™',
        pessimistic: 'ğŸ» ×“×•×‘×™',
        costs: '×¢×œ×•×™×•×ª × ×¡×ª×¨×•×ª',
        buyCost: '×¢×œ×•×ª ×¨×›×™×©×”',
        sellCost: '×¢×œ×•×ª ××›×™×¨×”',
        maintenance: '×ª×—×–×•×§×” ×•×¤×™× ×•×™',
        spFee: '×“××™ × ×™×”×•×œ S&P',
        fxSpread: '××¨×•×•×— ××˜"×—',
        discount: '×”× ×—×” ×‘×¨×›×™×©×”',
        results: '×ª×•×¦××•×ª',
        realEstate: '× ×“×œ"×Ÿ',
        sp500: 'S&P 500',
        finalEquity: '×”×•×Ÿ ×¡×•×¤×™',
        cagr: '×ª×©×•××” ×©× ×ª×™×ª',
        totalInterest: '×¨×™×‘×™×ª ×©×©×•×œ××”',
        wealthGrowth: '×¦××™×—×ª ×”×•×Ÿ',
        cashFlow: '×ª×–×¨×™× ××–×•×× ×™×',
        rent: '×©×›×™×¨×•×ª',
        interestPmt: '×¨×™×‘×™×ª',
        principal: '×§×¨×Ÿ',
        netCashflow: '×ª×–×¨×™× × ×˜×•',
        year: '×©× ×”',
        years: '×©× ×™×',
        asset: '× ×›×¡',
        mortgage: '××©×›× ×ª×',
        leverage: '××™× ×•×£',
        creditScore: '×“×™×¨×•×’ ××©×¨××™',
        value: 'â‚ª ×¢×¨×š',
        roi: '% ×ª×©×•××”',
        repayMethod: '×©×™×˜×ª ×”×—×–×¨',
        spitzer: '×©×¤×™×¦×¨',
        equalPrincipal: '×§×¨×Ÿ ×©×•×•×”',
        mortgageTerm: '×ª×§×•×¤×ª ××©×›× ×ª×',
        simTimeframe: '××•×¤×§ ×¡×™××•×œ×¦×™×”',
        advancedConfig: '×”×’×“×¨×•×ª ××ª×§×“××•×ª',
        taxBasis: '×‘×¡×™×¡ ××™×¡×•×™',
        realTerms: '×¢×¨×›×™× ×¨×™××œ×™×™×',
        nominalTerms: '×¢×¨×›×™× × ×•××™× ×œ×™×™×',
        fxMode: '××¦×‘ ××˜"×—',
        hedged: '××’×•×“×¨ (â‚ª)',
        exposed: '×—×©×•×£ ($)',
        rentSurplus: '×¢×•×“×£ ×©×›×™×¨×•×ª',
        reinvest: '×”×©×§×¢×” ××—×“×©',
        pocket: '×›×™×¡',
        match: '×”×ª×××”',
        reAnnualRoi: '×ª×©×•××” ×©× ×ª×™×ª × ×“×œ"×Ÿ',
        spAnnualRoi: '×ª×©×•××” ×©× ×ª×™×ª S&P',
        roiDiff: '×‘×™×¦×•×¢×™ ×™×ª×¨',
        reNet: '× ×“×œ"×Ÿ × ×˜×•',
        spNet: 'S&P 500 × ×˜×•',
        rentIncome: '×”×›× ×¡×” ××©×›×™×¨×•×ª',
        masShevachPaid: '××¡ ×©×‘×—',
        capGainsPaid: '××¡ ×¨×•×•×—×™ ×”×•×Ÿ',
        mixAllocation: '×”×§×¦××ª ×ª××”×™×œ',
        editRates: '×¢×¨×™×›×ª ×¨×™×‘×™×•×ª',
        earlyRepayments: '×¤×™×¨×¢×•× ×•×ª ××•×§×“××™×',
        addPrepayment: '+ ×”×•×¡×£ ×¤×™×¨×¢×•×Ÿ',
        advanced: '××ª×§×“×',
        advancedTermHint: '×”×©×ª××© ×‘××ª×§×“× ×œ×§×‘×™×¢×ª ×ª×§×•×¤×•×ª ×©×•× ×•×ª ×œ×›×œ ××¡×œ×•×œ. ×œ×—×¥ ×©×•×‘ ×œ×—×–×¨×” ×œ×ª×§×•×¤×” ××—×™×“×”.',
        riskTier: '×“×¨×’×ª ×¡×™×›×•×Ÿ',
        auto: '××•×˜×•××˜×™',
        custom: '××•×ª××',
        hist: '×”×™×¡×˜×•×¨×™',
        fixed: '×§×‘×•×¢',
        quickScenarios: '×ª×¨×—×™×©×™× ××”×™×¨×™×',
        sweetSpotOptimize: '× ×§×•×“×” ××ª×•×§×”:',
        optRoi: '×ª×©×•××”',
        optOutperform: '×‘×™×¦×•×¢×™ ×™×ª×¨',
        rentTax: '××¡ ×©×›×™×¨×•×ª (10% > 5.6k)',
        annualMgmtFee: '×“××™ × ×™×”×•×œ ×©× ×ª×™×™×',
        depositFee: '×¢××œ×ª ×”×¤×§×“×”',
        surplusDescInvest: '×§× ×” S&P (××©×§×™×¢ ×¢×•×“×£ ×©×›×™×¨×•×ª ×‘-S&P 500)',
        surplusDescConsume: '×›×™×¡ (×©××•×¨ ×¢×•×“×£ ×©×›×™×¨×•×ª ×›××–×•××Ÿ)',
        surplusDescMatch: '××•×›×¨ S&P 500 ×œ×”×ª×××” ×œ×¢×•×“×£ ×©×›×™×¨×•×ª',
        affectsPrime: '*××©×¤×™×¢ ×¢×œ ×¨×™×‘×™×ª ×¤×¨×™×™× (×‘× ×§ ×™×©×¨××œ + 1.5%)',
        discountHint: '××ª×—×ª ×œ××—×™×¨ ×©×•×§ (×©×œ×™×œ×™ = ×ª×©×œ×•× ×™×ª×¨)',
        buyCostHint: '×¢×œ×•×™×•×ª ×›× ×™×¡×” (×¢×•"×“/×¨×™×©×•×; ×œ×œ× ××¡ ×¨×›×™×©×”/×ª×™×•×•×š)',
        maintHint: '% ××”×©×›×™×¨×•×ª ×‘×¨×•×˜×• ×©××•×‘×“ ×©× ×ª×™×ª',
        sellCostHint: '××ª×•×•×š ×•×¢×•"×“ ×‘×™×¦×™××”',
        realVsInflation: '×¨×™××œ×™ (××•×œ ××™× ×¤×œ×¦×™×”)',
        nominalVsUsd: '× ×•××™× ×œ×™ (××•×œ ×“×•×œ×¨)',
        applyTaxSP: '××¡ ×¨×•×•×—×™ ×”×•×Ÿ (25%)',
        yearsToPosCF: '×©× ×™× ×œ×ª×–×¨×™× ×—×™×•×‘×™',
        moneyInvested: '×›×¡×£ ×©×”×•×©×§×¢',
        mixWarning: '×”×ª××”×™×œ ×—×™×™×‘ ×œ×”×¡×ª×›× ×‘-100% ×œ×¦×¤×™×™×” ×‘×’×¨×¤×™×',
        wealthChart: '×¦×‘×™×¨×ª ×”×•×Ÿ × ×˜×•',
        flowChart: '×ª×–×¨×™× ×—×•×“×©×™ (×”×›× ×¡×•×ª ××•×œ ×”×•×¦××•×ª)',
        free: '×—×•×¤×©×™',
        locked: '× ×¢×•×œ',
        tamheelDefault: 'âš–ï¸ ×××•×–×Ÿ',
        tamheelArbitrage: 'ğŸ“‰ ×”×•×¨×“×ª ×¨×™×‘×™×ª',
        tamheelShield: 'ğŸ›¡ï¸ ×™×¦×™×‘×•×ª',
        tamheelInvestor: 'ğŸ“Š ×¦××•×“ ××“×“',
        cpiSuffix: '+ ××“×“',
        yrSuffix: '×©× ×”',
        ySuffix: '×©× ×”',
        chartRealEstate: '× ×“×œ"×Ÿ',
        chartSP500: 'S&P 500',
        chartREAfterTax: '× ×“×œ"×Ÿ ××—×¨×™ ××¡',
        chartSPAfterTax: 'S&P ××—×¨×™ ××¡',
        chartRETax: '××¡ × ×“×œ"×Ÿ',
        chartSPTax: '××¡ S&P',
        afterTax: '××—×¨×™ ××¡',
        taxPaid: '××¡',
        taxDeduction: '××¡',
        chartReinvested: '×¢×•×“×£ ××•×©×§×¢ ××—×“×©',
        chartNetCashflow: '×ª×–×¨×™× × ×˜×•',
        chartRentMinusInt: '×©×›×™×¨×•×ª ×¤×—×•×ª ×¨×™×‘×™×ª',
        chartRevenue: '×”×›× ×¡×” (×©×›×™×¨×•×ª)',
        chartInterest: '×¨×™×‘×™×ª (×¢×œ×•×ª)',
        chartPrincipal: '×§×¨×Ÿ (×”×•×Ÿ)',
        chartYAxisROI: '×ª×©×•××” ××¦×˜×‘×¨×ª (%)',
        chartYAxisWealth: '×”×•×Ÿ × ×˜×• (â‚ª)',
        chartYAxisMonthly: 'â‚ª ×—×•×“×©×™',
        chartTotalMortgage: '×¡×”"×› ××©×›× ×ª×',
        tooltipRentMinusInt: '×©×›×™×¨×•×ª - ×¨×™×‘×™×ª',
        tooltipInterest: '×¨×™×‘×™×ª',
        tooltipPrincipal: '×§×¨×Ÿ',
        tooltipRent: '×©×›×™×¨×•×ª',
        tooltipNet: '× ×˜×•',
        purchaseTax: '××¡ ×¨×›×™×©×”',
        includePurchaseTax: '×”×—×œ ××¡ ×¨×›×™×©×”',
        applyMasShevach: '×”×—×œ ××¡ ×©×‘×— (×¦××•×“ ××“×“)'
    };

    const T = { en, he };
    let lang = localStorage.getItem('lang') || 'en';

    function t(key) {
        return T[lang][key] || T['en'][key] || key;
    }

    function getLang() {
        return lang;
    }

    function setLang(l) {
        lang = l;
    }

    // Expose globally
    window.i18n = { T, t, getLang, setLang };
})();
